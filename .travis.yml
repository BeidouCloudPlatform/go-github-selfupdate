language: go
os:
  - linux
  - osx
install:
  - go get -t -d -v ./...
  - cd $GOPATH/src/github.com/google/go-github && git reset --hard 08e68b5 && cd -
  - go version
  - go env
script:
  - go build ./selfupdate/
  - go build ./cmd/selfupdate-example/
  - go build ./cmd/detect-latest-release/
  - go build ./cmd/go-get-release/
  - go test -v -race -coverprofile=coverage.txt ./selfupdate
after_success:
  - bash <(curl -s https://codecov.io/bash)
